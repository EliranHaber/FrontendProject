<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <title>IndexedDB Library Test</title>
</head>
<body>
   <h1>IndexedDB Library Test</h1>
   <p>Open browser console to see test results</p>
   
   <script src="public/idb.js"></script>
   <script>
     // Debug: Check if library loaded
     console.log("Library loading check:");
     console.log("window.idb exists:", !!window.idb);
     console.log("window.idb type:", typeof window.idb);
     if (window.idb) {
       console.log("window.idb methods:", Object.keys(window.idb));
     }
     
     async function test() {
       try {
         console.log("Starting IndexedDB library test...");
         
         // Check if the library loaded properly
         if (!window.idb) {
           throw new Error("IndexedDB library not loaded. window.idb is undefined.");
         }
         
         console.log("✓ IndexedDB library loaded successfully");
         
                   const dbConnection = await window.idb.openCostsDB("costsdb", 1);
          
          if(dbConnection) {
            console.log("✓ Creating database succeeded");
          }
          
          const result1 = await window.idb.addCost({
           sum: 200, 
           currency: "USD", 
           category: "FOOD",
           description: "pizza"
         });
         
         if(result1) {
           console.log("✓ Adding 1st cost item succeeded:", result1);
         }
         
                   const result2 = await window.idb.addCost({
           sum: 400, 
           currency: "USD", 
           category: "CAR",
           description: "fuel"
         });
         
         if(result2) {
           console.log("✓ Adding 2nd cost item succeeded:", result2);
         }
         
                   // Test getReport function
          const report = await window.idb.getReport(2025, 1, "USD");
         console.log("✓ Monthly report generated:", report);
         
         console.log("All tests completed successfully!");
         
       } catch (error) {
         console.error("Test failed:", error);
       }
     }
     
     test();
   </script>
</body>
</html>
